cmake_minimum_required(VERSION 2.8.6)

    if(WIN32)
    set(HPMPC_FLAGS -DOS_WINDOWS)
    elseif(APPLE)
     set(HPMPC_FLAGS -DOS_MAC)
    else()
     set(HPMPC_FLAGS -DOS_LINUX)
    endif()
    if()
    set(CMAKE_SHARED_LINKER_FLAGS ${CMAKE_SHARED_LINKER_FLAGS} -Wl,--unresolved-symbols=report-all)
    endif()
    include_directories(${CMAKE_CURRENT_SOURCE_DIR}/../blasfeo/src/include)
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/dummy_include)
include_directories(${CMAKE_CURRENT_SOURCE_DIR}/dummy_include/foo/bar)
casadi_external_library(casadi_hpmpc_X64_AVX2_X64_INTEL_HASWELL src/test_problems/-lm)
SET_TARGET_PROPERTIES(casadi_hpmpc_X64_AVX2_X64_INTEL_HASWELL PROPERTIES COMPILE_FLAGS "-DLA_BLASFEO -DTARGET_X64_INTEL_HASWELL -DTARGET_X64_AVX2 -o test.out tools.o test_d_ip_hard_libstr.o ${HPMPC_FLAGS}")

target_link_libraries(casadi_hpmpc_X64_AVX2_X64_INTEL_HASWELL casadi_blasfeo_X64_INTEL_HASWELL m)
