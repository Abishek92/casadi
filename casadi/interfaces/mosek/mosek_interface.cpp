/*
 *    This file is part of CasADi.
 *
 *    CasADi -- A symbolic framework for dynamic optimization.
 *    Copyright (C) 2010-2014 Joel Andersson, Joris Gillis, Moritz Diehl,
 *                            K.U. Leuven. All rights reserved.
 *    Copyright (C) 2011-2014 Greg Horn
 *
 *    CasADi is free software; you can redistribute it and/or
 *    modify it under the terms of the GNU Lesser General Public
 *    License as published by the Free Software Foundation; either
 *    version 3 of the License, or (at your option) any later version.
 *
 *    CasADi is distributed in the hope that it will be useful,
 *    but WITHOUT ANY WARRANTY; without even the implied warranty of
 *    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 *    Lesser General Public License for more details.
 *
 *    You should have received a copy of the GNU Lesser General Public
 *    License along with CasADi; if not, write to the Free Software
 *    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
 *
 */


#include "mosek_interface.hpp"

#include "casadi/core/std_vector_tools.hpp"
#include "casadi/core/matrix/matrix_tools.hpp"
#include "casadi/core/mx/mx_tools.hpp"
#include "casadi/core/function/mx_function.hpp"

using namespace std;
namespace casadi {

  // Stream printer for MOSEK
  static void MSKAPI printstr(void *handle, MSKCONST char str[]){
    std::cout << str;
  }

  extern "C"
  int CASADI_SOCPSOLVER_MOSEK_EXPORT
  casadi_register_socpsolver_mosek(SocpSolverInternal::Plugin* plugin) {
    plugin->creator = MosekInterface::creator;
    plugin->name = "mosek";
    plugin->doc = MosekInterface::meta_doc.c_str();
    plugin->version = 22;
    return 0;
  }

  extern "C"
  void CASADI_SOCPSOLVER_MOSEK_EXPORT casadi_load_socpsolver_mosek() {
    SocpSolverInternal::registerPlugin(casadi_register_socpsolver_mosek);
  }

  MosekInterface* MosekInterface::clone() const {
    // Return a deep copy
    MosekInterface* node = new MosekInterface(st_);
    if (!node->is_init_)
      node->init();
    return node;
  }

  MosekInterface::MosekInterface(const std::vector<Sparsity> &st) : SocpSolverInternal(st) {
    initialized_ = false;
    // Set options 
    addOption( "MSK_DPAR_ANA_SOL_INFEAS_TOL",                   OT_REAL,                   1.00E-06,                   "If a constraint violates its bound with an amount larger than this value, the constraint name, index and violation will be printed by the solution analyzer (see MOSEK manual for more detailed description)."                                                                                                                                                   );
    addOption( "MSK_DPAR_BASIS_REL_TOL_S",                      OT_REAL,                   1.00E-12,                   "Maximum relative dual bound violation allowed in an optimal basic solution (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                    );
    addOption( "MSK_DPAR_BASIS_TOL_S",                          OT_REAL,                   1.00E-06,                   "Maximum absolute dual bound violation in an optimal basic solution (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                            );
    addOption( "MSK_DPAR_BASIS_TOL_X",                          OT_REAL,                   1.00E-06,                   "Maximum absolute primal bound violation allowed in an optimal basic solution (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_CHECK_CONVEXITY_REL_TOL",              OT_REAL,                   1.00E-10,                   "Convexity check tolerance (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                     );
    addOption( "MSK_DPAR_DATA_TOL_AIJ",                         OT_REAL,                   1.00E-12,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_AIJ_HUGE",                    OT_REAL,                   1.00E+20,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_AIJ_LARGE",                   OT_REAL,                   1.00E+10,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_BOUND_INF",                   OT_REAL,                   1.00E+16,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_BOUND_WRN",                   OT_REAL,                   1.00E+08,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_C_HUGE",                      OT_REAL,                   1.00E+16,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_CJ_LARGE",                    OT_REAL,                   1.00E+08,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_QIJ",                         OT_REAL,                   1.00E-16,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_DATA_TOL_X",                           OT_REAL,                   1.00E-08,                   "Data tolerance threshold (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                      );
    addOption( "MSK_DPAR_FEASREPAIR_TOL",                       OT_REAL,                   1.00E-10,                   "Tolerance for constraint enforcing upper bound on sum of weighted violations in feasibility repair (see MOSEK manual for more detailed description)."                                                                                                                                                                                                            );
    addOption( "MSK_DPAR_INTPNT_CO_TOL_DFEAS",                  OT_REAL,                   1.00E-08,                   "Dual feasibility tolerance used by the conic interior-point optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                         );
    addOption( "MSK_DPAR_INTPNT_CO_TOL_INFEAS",                 OT_REAL,                   1.00E-10,                   "Infeasibility tolerance for the conic solver (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_INTPNT_CO_TOL_MU_RED",                 OT_REAL,                   1.00E-08,                   "Optimality tolerance for the conic solver (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                     );
    addOption( "MSK_DPAR_INTPNT_CO_TOL_NEAR_REL",               OT_REAL,                   1.00E+03,                   "Optimality tolerance for the conic solver (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                     );
    addOption( "MSK_DPAR_INTPNT_CO_TOL_PFEAS",                  OT_REAL,                   1.00E-08,                   "Primal feasibility tolerance used by the conic interior-point optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                       );
    addOption( "MSK_DPAR_INTPNT_CO_TOL_REL_GAP",                OT_REAL,                   1.00E-07,                   "Relative gap termination tolerance used by the conic interior-point optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                 );
    addOption( "MSK_DPAR_INTPNT_NL_MERIT_BAL",                  OT_REAL,                   1.00E-04,                   "Controls if the complementarity and infeasibility is converging to zero at about equal rates (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_INTPNT_NL_TOL_DFEAS",                  OT_REAL,                   1.00E-08,                   "Dual feasibility tolerance used when a nonlinear model is solved (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                              );
    addOption( "MSK_DPAR_INTPNT_NL_TOL_MU_RED",                 OT_REAL,                   1.00E-12,                   "Relative complementarity gap tolerance (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                        );
    addOption( "MSK_DPAR_INTPNT_NL_TOL_NEAR_REL",               OT_REAL,                   1.00E+03,                   "Nonlinear solver optimality tolerance parameter (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                               );
    addOption( "MSK_DPAR_INTPNT_NL_TOL_PFEAS",                  OT_REAL,                   1.00E-08,                   "Primal feasibility tolerance used when a nonlinear model is solved (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                            );
    addOption( "MSK_DPAR_INTPNT_NL_TOL_REL_GAP",                OT_REAL,                   1.00E-06,                   "Relative gap termination tolerance for nonlinear problems (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                     );
    addOption( "MSK_DPAR_INTPNT_NL_TOL_REL_STEP",               OT_REAL,                   9.95E-01,                   "Relative step size to the boundary for general nonlinear optimization problems (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                );
    addOption( "MSK_DPAR_INTPNT_TOL_DFEAS",                     OT_REAL,                   1.00E-08,                   "Dual feasibility tolerance used for linear and quadratic optimization problems (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                );
    addOption( "MSK_DPAR_INTPNT_TOL_DSAFE",                     OT_REAL,                   1.00E+00,                   "Controls the interior-point dual starting point (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                               );
    addOption( "MSK_DPAR_INTPNT_TOL_INFEAS",                    OT_REAL,                   1.00E-10,                   "Nonlinear solver infeasibility tolerance parameter (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                            );
    addOption( "MSK_DPAR_INTPNT_TOL_MU_RED",                    OT_REAL,                   1.00E-16,                   "Relative complementarity gap tolerance (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                        );
    addOption( "MSK_DPAR_INTPNT_TOL_PATH",                      OT_REAL,                   1.00E-08,                   "interior-point centering aggressiveness (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                       );
    addOption( "MSK_DPAR_INTPNT_TOL_PFEAS",                     OT_REAL,                   1.00E-08,                   "Primal feasibility tolerance used for linear and quadratic optimization problems (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                              );
    addOption( "MSK_DPAR_INTPNT_TOL_PSAFE",                     OT_REAL,                   1.00E+00,                   "Controls the interior-point primal starting point (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                             );
    addOption( "MSK_DPAR_INTPNT_TOL_REL_GAP",                   OT_REAL,                   1.00E-08,                   "Relative gap termination tolerance (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                            );
    addOption( "MSK_DPAR_INTPNT_TOL_REL_STEP",                  OT_REAL,                   0.9999,                   "Relative step size to the boundary for linear and quadratic optimization problems (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                             );
    addOption( "MSK_DPAR_INTPNT_TOL_STEP_SIZE",                 OT_REAL,                   1.00E-06,                   "If the step size falls below the value of this parameter,                   then the interior-point optimizer assumes that it is stalled. In other words the interior-point optimizer does not make any progress and therefore it is better stop (see MOSEK manual for more detailed description)."                                                              );
    addOption( "MSK_DPAR_LOWER_OBJ_CUT",                        OT_REAL,                   -1.00E+30,                  "Objective bound (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                               );
    addOption( "MSK_DPAR_LOWER_OBJ_CUT_FINITE_TRH",             OT_REAL,                   -5.00E+29,                  "Objective bound (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                               );
    addOption( "MSK_DPAR_MIO_DISABLE_TERM_TIME",                OT_REAL,                   -1.00E+00,                  "Certain termination criteria is disabled within the mixed-integer optimizer for period time specified by the parameter (see MOSEK manual for more detailed description)."                                                                                                                                                                                        );
    addOption( "MSK_DPAR_MIO_HEURISTIC_TIME",                   OT_REAL,                   -1.00E+00,                  "Time limit for the mixed-integer heuristics (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                   );
    addOption( "MSK_DPAR_MIO_MAX_TIME",                         OT_REAL,                   -1.00E+00,                  "Time limit for the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                    );
    addOption( "MSK_DPAR_MIO_MAX_TIME_APRX_OPT",                OT_REAL,                   6.00E+01,                   "Time limit for the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                    );
    addOption( "MSK_DPAR_MIO_NEAR_TOL_ABS_GAP",                 OT_REAL,                   0.00E+00,                   "Relaxed absolute optimality tolerance employed by the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                 );
    addOption( "MSK_DPAR_MIO_NEAR_TOL_REL_GAP",                 OT_REAL,                   1.00E-03,                   "The mixed-integer optimizer is terminated when this tolerance is satisfied (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                    );
    addOption( "MSK_DPAR_MIO_REL_ADD_CUT_LIMITED",              OT_REAL,                   7.50E-01,                   "Controls cut generation for mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                           );
    addOption( "MSK_DPAR_MIO_REL_GAP_CONST",                    OT_REAL,                   1.00E-10,                   "This value is used to compute the relative gap for the solution to an integer optimization problem (see MOSEK manual for more detailed description)."                                                                                                                                                                                                            );
    addOption( "MSK_DPAR_MIO_TOL_ABS_GAP",                      OT_REAL,                   0.00E+00,                   "Absolute optimality tolerance employed by the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                         );
    addOption( "MSK_DPAR_MIO_TOL_ABS_RELAX_INT",                OT_REAL,                   1.00E-05,                   "Integer constraint tolerance (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_MIO_TOL_FEAS",                         OT_REAL,                   1.00E-07,                   "Feasibility tolerance for mixed integer solver. Any solution with maximum infeasibility below this value will be considered feasible (see MOSEK manual for more detailed description)."                                                                                                                                                                          );
    addOption( "MSK_DPAR_MIO_TOL_REL_DUAL_BOUND_IMPROVEMENT",   OT_REAL,                   0.00E+00,                   "Controls cut generation for mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                           );
    addOption( "MSK_DPAR_MIO_TOL_REL_GAP",                      OT_REAL,                   1.00E-04,                   "Relative optimality tolerance employed by the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                         );
    addOption( "MSK_DPAR_MIO_TOL_REL_RELAX_INT",                OT_REAL,                   1.00E-06,                   "Integer constraint tolerance (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_MIO_TOL_X",                            OT_REAL,                   1.00E-06,                   "Absolute solution tolerance used in mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                   );
    addOption( "MSK_DPAR_NONCONVEX_TOL_FEAS",                   OT_REAL,                   1.00E-06,                   "Feasibility tolerance used by the nonconvex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                         );
    addOption( "MSK_DPAR_NONCONVEX_TOL_OPT",                    OT_REAL,                   1.00E-07,                   "Optimality tolerance used by the nonconvex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                          );
    addOption( "MSK_DPAR_OPTIMIZER_MAX_TIME",                   OT_REAL,                   -1.00E+00,                  "Solver time limit (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                             );
    addOption( "MSK_DPAR_PRESOLVE_TOL_ABS_LINDEP",              OT_REAL,                   1.00E-06,                   "Absolute tolerance employed by the linear dependency checker (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_PRESOLVE_TOL_AIJ",                     OT_REAL,                   1.00E-12,                   "Absolute zero tolerance employed for constraint coefficients in the presolve (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_PRESOLVE_TOL_REL_LINDEP",              OT_REAL,                   1.00E-10,                   "Relative tolerance employed by the linear dependency checker (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                  );
    addOption( "MSK_DPAR_PRESOLVE_TOL_S",                       OT_REAL,                   1.00E-08,                   "Absolute zero tolerance employed for slack variables in the presolve (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                          );
    addOption( "MSK_DPAR_PRESOLVE_TOL_X",                       OT_REAL,                   1.00E-08,                   "Absolute zero tolerance employed for variables in the presolve (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                );
    addOption( "MSK_DPAR_QCQO_REFORMULATE_REL_DROP_TOL",        OT_REAL,                   1.00E-15,                   "This parameter determines when columns are dropped in incomplete cholesky factorization doing reformulation of quadratic problems (see MOSEK manual for more detailed description)."                                                                                                                                                                             );
    addOption( "MSK_DPAR_SIM_LU_TOL_REL_PIV",                   OT_REAL,                   1.00E-02,                   "Relative pivot tolerance employed when computing the LU factorization of the basis matrix (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                     );
    addOption( "MSK_DPAR_SIMPLEX_ABS_TOL_PIV",                  OT_REAL,                   1.00E-07,                   "Absolute pivot tolerance employed by the simplex optimizers (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                   );
    addOption( "MSK_DPAR_UPPER_OBJ_CUT",                        OT_REAL,                   1.00E+30,                   "Objective bound (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                               );
    addOption( "MSK_DPAR_UPPER_OBJ_CUT_FINITE_TRH",             OT_REAL,                   5.00E+29,                   "Objective bound (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                               );
    addOption( "MSK_IPAR_ALLOC_ADD_QNZ",                        OT_INTEGER,                5000,                       "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_ANA_SOL_BASIS",                        OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_ANA_SOL_PRINT_VIOLATED",               OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_AUTO_SORT_A_BEFORE_OPT",               OT_INTEGER,                0,                          "Controls whether the elements in each column of A are sorted before an optimization is performed (see MOSEK manual for more detailed description)."                                                                                                                                                                                                              );
    addOption( "MSK_IPAR_AUTO_UPDATE_SOL_INFO",                 OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_BASIS_SOLVE_USE_PLUS_ONE",             OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_BI_CLEAN_OPTIMIZER",                   OT_INTEGER,                0,                          "Controls which simplex optimizer is used in the clean-up phase (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                );
    addOption( "MSK_IPAR_BI_IGNORE_MAX_ITER",                   OT_INTEGER,                0,                          "Turns on basis identification in case the interior-point optimizer is terminated due to maximum number of iterations (see MOSEK manual for more detailed description)."                                                                                                                                                                                          );
    addOption( "MSK_IPAR_BI_IGNORE_NUM_ERROR",                  OT_INTEGER,                0,                          "Turns on basis identification in case the interior-point optimizer is terminated due to a numerical problem (see MOSEK manual for more detailed description)."                                                                                                                                                                                                   );
    addOption( "MSK_IPAR_BI_MAX_ITERATIONS",                    OT_INTEGER,                1000000,                    "Maximum number of iterations after basis identification (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                       );
    addOption( "MSK_IPAR_CACHE_LICENSE",                        OT_INTEGER,                1,                          "Control license caching (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                       );
    addOption( "MSK_IPAR_CHECK_CONVEXITY",                      OT_INTEGER,                2,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_COMPRESS_STATFILE",                    OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_CONCURRENT_NUM_OPTIMIZERS",            OT_INTEGER,                2,                          "The maximum number of simultaneous optimizations that will be started by the concurrent optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                             );
    addOption( "MSK_IPAR_CONCURRENT_PRIORITY_DUAL_SIMPLEX",     OT_INTEGER,                2,                          "Priority of the dual simplex algorithm when selecting solvers for concurrent optimization (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                     );
    addOption( "MSK_IPAR_CONCURRENT_PRIORITY_FREE_SIMPLEX",     OT_INTEGER,                3,                          "Priority of the free simplex optimizer when selecting solvers for concurrent optimization (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                     );
    addOption( "MSK_IPAR_CONCURRENT_PRIORITY_INTPNT",           OT_INTEGER,                4,                          "Priority of the interior-point algorithm when selecting solvers for concurrent optimization (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                   );
    addOption( "MSK_IPAR_CONCURRENT_PRIORITY_PRIMAL_SIMPLEX",   OT_INTEGER,                1,                          "Priority of the primal simplex algorithm when selecting solvers for concurrent optimization (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                   );
    addOption( "MSK_IPAR_FEASREPAIR_OPTIMIZE",                  OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_INFEAS_GENERIC_NAMES",                 OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_INFEAS_PREFER_PRIMAL",                 OT_INTEGER,                1,                          "Controls which certificate is used if both primal- and dual- certificate of infeasibility is available (see MOSEK manual for more detailed description)."                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_INFEAS_REPORT_AUTO",                   OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_INFEAS_REPORT_LEVEL",                  OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_INTPNT_BASIS",                         OT_INTEGER,                1,                          "Controls whether basis identification is performed (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_INTPNT_DIFF_STEP",                     OT_INTEGER,                1,                          "Controls whether different step sizes are allowed in the primal and dual space (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                );
    addOption( "MSK_IPAR_INTPNT_FACTOR_DEBUG_LVL",              OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_INTPNT_FACTOR_METHOD",                 OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_INTPNT_HOTSTART",                      OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_INTPNT_MAX_ITERATIONS",                OT_INTEGER,                400,                        "Controls the maximum number of iterations allowed in the interior-point optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                             );
    addOption( "MSK_IPAR_INTPNT_MAX_NUM_COR",                   OT_INTEGER,                -1,                         "Maximum number of correction steps (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_INTPNT_MAX_NUM_REFINEMENT_STEPS",      OT_INTEGER,                -1,                         "Maximum number of steps to be used by the iterative search direction refinement (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                               );
    addOption( "MSK_IPAR_INTPNT_OFF_COL_TRH",                   OT_INTEGER,                40,                         "Controls the aggressiveness of the offending column detection (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                 );
    addOption( "MSK_IPAR_INTPNT_ORDER_METHOD",                  OT_INTEGER,                0,                          "Controls the ordering strategy (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                );
    addOption( "MSK_IPAR_INTPNT_REGULARIZATION_USE",            OT_INTEGER,                1,                          "Controls whether regularization is allowed (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                    );
    addOption( "MSK_IPAR_INTPNT_SCALING",                       OT_INTEGER,                0,                          "Controls how the problem is scaled before the interior-point optimizer is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                );
    addOption( "MSK_IPAR_INTPNT_SOLVE_FORM",                    OT_INTEGER,                0,                          "Controls whether the primal or the dual problem is solved (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                     );
    addOption( "MSK_IPAR_INTPNT_STARTING_POINT",                OT_INTEGER,                0,                          "Starting point used by the interior-point optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LIC_TRH_EXPIRY_WRN",                   OT_INTEGER,                7,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LICENSE_ALLOW_OVERUSE",                OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LICENSE_DEBUG",                        OT_INTEGER,                0,                          "Controls the license manager client debugging behavior (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_LICENSE_PAUSE_TIME",                   OT_INTEGER,                100,                        "Controls license manager client behavior (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                      );
    addOption( "MSK_IPAR_LICENSE_SUPPRESS_EXPIRE_WRNS",         OT_INTEGER,                0,                          "Controls license manager client behavior (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                      );
    addOption( "MSK_IPAR_LICENSE_WAIT",                         OT_INTEGER,                0,                          "Controls if MOSEK should queue for a license if none is available (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                             );
    addOption( "MSK_IPAR_LOG",                                  OT_INTEGER,                10,                         "Controls the amount of log information (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_LOG_BI",                               OT_INTEGER,                4,                          "Controls the amount of output printed by the basis identification procedure. A higher level implies that more information is logged (see MOSEK manual for more detailed description)."                                                                                                                                                                           );
    addOption( "MSK_IPAR_LOG_BI_FREQ",                          OT_INTEGER,                2500,                       "Controls the logging frequency (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                );
    addOption( "MSK_IPAR_LOG_CHECK_CONVEXITY",                  OT_INTEGER,                0,                          "Controls logging in convexity check on quadratic problems. Set to a positive value to turn logging on. If a quadratic coefficient matrix is found to violate the requirement of PSD (NSD) then a list of negative (positive) pivot elements is printed. The absolute value of the pivot elements is also shown (see MOSEK manual for more detailed description).");
    addOption( "MSK_IPAR_LOG_CONCURRENT",                       OT_INTEGER,                1,                          "Controls amount of output printed by the concurrent optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                 );
    addOption( "MSK_IPAR_LOG_CUT_SECOND_OPT",                   OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LOG_EXPAND",                           OT_INTEGER,                0,                          "Controls the amount of logging when a data item such as the maximum number constrains is expanded (see MOSEK manual for more detailed description)."                                                                                                                                                                                                             );
    addOption( "MSK_IPAR_LOG_FACTOR",                           OT_INTEGER,                1,                          "If turned on,                   then the factor log lines are added to the log (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                );
    addOption( "MSK_IPAR_LOG_FEAS_REPAIR",                      OT_INTEGER,                1,                          "Controls the amount of output printed when performing feasibility repair. A value higher than one means extensive logging (see MOSEK manual for more detailed description)."                                                                                                                                                                                     );
    addOption( "MSK_IPAR_LOG_FILE",                             OT_INTEGER,                1,                          "If turned on,                   then some log info is printed when a file is written or read (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_LOG_HEAD",                             OT_INTEGER,                1,                          "If turned on,                   then a header line is added to the log (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_LOG_INFEAS_ANA",                       OT_INTEGER,                1,                          "Controls log level for the infeasibility analyzer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                             );
    addOption( "MSK_IPAR_LOG_INTPNT",                           OT_INTEGER,                4,                          "Controls the amount of log information from the interior-point optimizers (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                     );
    addOption( "MSK_IPAR_LOG_MIO",                              OT_INTEGER,                4,                          "Controls the amount of log information from the mixed-integer optimizers (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                      );
    addOption( "MSK_IPAR_LOG_MIO_FREQ",                         OT_INTEGER,                1000,                       "The mixed-integer solver logging frequency (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                    );
    addOption( "MSK_IPAR_LOG_NONCONVEX",                        OT_INTEGER,                1,                          "Controls amount of output printed by the nonconvex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_LOG_OPTIMIZER",                        OT_INTEGER,                1,                          "Controls the amount of general optimizer information that is logged (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LOG_ORDER",                            OT_INTEGER,                1,                          "If turned on,                   then factor lines are added to the log (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_LOG_PARAM",                            OT_INTEGER,                0,                          "Controls the amount of information printed out about parameter changes (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_LOG_PRESOLVE",                         OT_INTEGER,                1,                          "Controls amount of output printed by the presolve procedure. A higher level implies that more information is logged (see MOSEK manual for more detailed description)."                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LOG_RESPONSE",                         OT_INTEGER,                0,                          "Controls amount of output printed when response codes are reported. A higher level implies that more information is logged (see MOSEK manual for more detailed description)."                                                                                                                                                                                    );
    addOption( "MSK_IPAR_LOG_SENSITIVITY",                      OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LOG_SENSITIVITY_OPT",                  OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_LOG_SIM",                              OT_INTEGER,                4,                          "Controls the amount of log information from the simplex optimizers (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_LOG_SIM_FREQ",                         OT_INTEGER,                1000,                       "Controls simplex logging frequency (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_LOG_SIM_MINOR",                        OT_INTEGER,                1,                          "Currently not in use (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                          );
    addOption( "MSK_IPAR_LOG_SIM_NETWORK_FREQ",                 OT_INTEGER,                1000,                       "Controls the network simplex logging frequency (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                );
    addOption( "MSK_IPAR_LOG_STORAGE",                          OT_INTEGER,                0,                          "Controls the memory related log information (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                   );
    addOption( "MSK_IPAR_MAX_NUM_WARNINGS",                     OT_INTEGER,                10,                         "A negtive number means all warnings are logged. Otherwise the parameter specifies the maximum number times each warning is logged (see MOSEK manual for more detailed description)."                                                                                                                                                                             );
    addOption( "MSK_IPAR_MIO_BRANCH_DIR",                       OT_INTEGER,                0,                          "Controls whether the mixed-integer optimizer is branching up or down by default (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                               );
    addOption( "MSK_IPAR_MIO_BRANCH_PRIORITIES_USE",            OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_MIO_CONSTRUCT_SOL",                    OT_INTEGER,                0,                          "Controls if an initial mixed integer solution should be constructed from the values of the integer variables (see MOSEK manual for more detailed description)."                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_MIO_CONT_SOL",                         OT_INTEGER,                0,                          "Controls the meaning of interior-point and basic solutions in mixed integer problems (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                          );
    addOption( "MSK_IPAR_MIO_CUT_LEVEL_ROOT",                   OT_INTEGER,                -1,                         "Controls the cut level employed by the mixed-integer optimizer at the root node (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                               );
    addOption( "MSK_IPAR_MIO_CUT_LEVEL_TREE",                   OT_INTEGER,                -1,                         "Controls the cut level employed by the mixed-integer optimizer in the tree (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                    );
    addOption( "MSK_IPAR_MIO_FEASPUMP_LEVEL",                   OT_INTEGER,                -1,                         "Controls the feasibility pump heuristic which is used to construct a good initial feasible solution (see MOSEK manual for more detailed description)."                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_MIO_HEURISTIC_LEVEL",                  OT_INTEGER,                -1,                         "Controls the heuristic employed by the mixed-integer optimizer to locate an initial integer feasible solution (see MOSEK manual for more detailed description)."                                                                                                                                                                                                 );
    addOption( "MSK_IPAR_MIO_HOTSTART",                         OT_INTEGER,                1,                          "Controls whether the integer optimizer is hot-started (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                         );
    addOption( "MSK_IPAR_MIO_KEEP_BASIS",                       OT_INTEGER,                1,                          "Controls whether the integer presolve keeps bases in memory (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                   );
    addOption( "MSK_IPAR_MIO_LOCAL_BRANCH_NUMBER",              OT_INTEGER,                -1,                         "Controls the size of the local search space when doing local branching (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_MIO_MAX_NUM_BRANCHES",                 OT_INTEGER,                -1,                         "Maximum number of branches allowed during the branch and bound search (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                         );
    addOption( "MSK_IPAR_MIO_MAX_NUM_RELAXS",                   OT_INTEGER,                -1,                         "Maximum number of relaxations in branch and bound search (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                      );
    addOption( "MSK_IPAR_MIO_MAX_NUM_SOLUTIONS",                OT_INTEGER,                -1,                         "Controls how many feasible solutions the mixed-integer optimizer investigates (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                 );
    addOption( "MSK_IPAR_MIO_MODE",                             OT_INTEGER,                1,                          "Turns on/off the mixed-integer mode (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_MIO_MT_USER_CB",                       OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_MIO_NODE_OPTIMIZER",                   OT_INTEGER,                0,                          "Controls which optimizer is employed at the non-root nodes in the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                     );
    addOption( "MSK_IPAR_MIO_NODE_SELECTION",                   OT_INTEGER,                0,                          "Controls the node selection strategy employed by the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_MIO_OPTIMIZER_MODE",                   OT_INTEGER,                0,                          "An exprimental feature (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_MIO_PRESOLVE_AGGREGATE",               OT_INTEGER,                1,                          "Controls whether problem aggregation is performed in the mixed-integer presolve (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                               );
    addOption( "MSK_IPAR_MIO_PRESOLVE_PROBING",                 OT_INTEGER,                1,                          "Controls whether probing is employed by the mixed-integer presolve (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_MIO_PRESOLVE_USE",                     OT_INTEGER,                1,                          "Controls whether presolve is performed by the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                         );
    addOption( "MSK_IPAR_MIO_ROOT_OPTIMIZER",                   OT_INTEGER,                0,                          "Controls which optimizer is employed at the root node in the mixed-integer optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                          );
    addOption( "MSK_IPAR_MIO_STRONG_BRANCH",                    OT_INTEGER,                -1,                         "The depth from the root in which strong branching is employed (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                 );
    addOption( "MSK_IPAR_MIO_USE_MULTITHREADED_OPTIMIZER",      OT_INTEGER,                0,                          "Controls wheter the new multithreaded optimizer should be used for Mixed integer problems (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                     );
    addOption( "MSK_IPAR_MT_SPINCOUNT",                         OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_NONCONVEX_MAX_ITERATIONS",             OT_INTEGER,                100000,                     "Maximum number of iterations that can be used by the nonconvex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                      );
    addOption( "MSK_IPAR_NUM_THREADS",                          OT_INTEGER,                0,                          "Controls the number of threads employed by the optimizer. If set to 0 the number of threads used will be equal to the number of cores detected on the machine (see MOSEK manual for more detailed description)."                                                                                                                                                 );
    addOption( "MSK_IPAR_OPF_MAX_TERMS_PER_LINE",               OT_INTEGER,                5,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_HEADER",                     OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_HINTS",                      OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_PARAMETERS",                 OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_PROBLEM",                    OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_SOL_BAS",                    OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_SOL_ITG",                    OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_SOL_ITR",                    OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPF_WRITE_SOLUTIONS",                  OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_OPTIMIZER",                            OT_INTEGER,                0,                          "Controls which optimizer is used to optimize the task (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                         );
    addOption( "MSK_IPAR_PARAM_READ_CASE_NAME",                 OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_PARAM_READ_IGN_ERROR",                 OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_PRESOLVE_ELIM_FILL",                   OT_INTEGER,                1,                          "Maximum amount of fill-in in the elimination phase (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_PRESOLVE_ELIMINATOR_MAX_NUM_TRIES",    OT_INTEGER,                -1,                         "Control the maximum number of times the eliminator is tried (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                   );
    addOption( "MSK_IPAR_PRESOLVE_ELIMINATOR_USE",              OT_INTEGER,                1,                          "Controls whether free or implied free variables are eliminated from the problem (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                               );
    addOption( "MSK_IPAR_PRESOLVE_LEVEL",                       OT_INTEGER,                -1,                         "Currently not used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_PRESOLVE_LINDEP_ABS_WORK_TRH",         OT_INTEGER,                100,                        "Controls linear dependency check in presolve (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_PRESOLVE_LINDEP_REL_WORK_TRH",         OT_INTEGER,                100,                        "Controls linear dependency check in presolve (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_PRESOLVE_LINDEP_USE",                  OT_INTEGER,                1,                          "Controls whether the linear constraints are checked for linear dependencies (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                   );
    addOption( "MSK_IPAR_PRESOLVE_MAX_NUM_REDUCTIONS",          OT_INTEGER,                -1,                         "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_PRESOLVE_USE",                         OT_INTEGER,                2,                          "Controls whether the presolve is applied to a problem before it is optimized (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_PRIMAL_REPAIR_OPTIMIZER",              OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_QO_SEPARABLE_REFORMULATION",           OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_ANZ",                             OT_INTEGER,                100000,                     "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_CON",                             OT_INTEGER,                10000,                      "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_CONE",                            OT_INTEGER,                2500,                       "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_DATA_COMPRESSED",                 OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_DATA_FORMAT",                     OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_KEEP_FREE_CON",                   OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_LP_DROP_NEW_VARS_IN_BOU",         OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_LP_QUOTED_NAMES",                 OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_MPS_FORMAT",                      OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_MPS_KEEP_INT",                    OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_MPS_OBJ_SENSE",                   OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_MPS_RELAX",                       OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_MPS_WIDTH",                       OT_INTEGER,                1024,                       "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_QNZ",                             OT_INTEGER,                20000,                      "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_TASK_IGNORE_PARAM",               OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_READ_VAR",                             OT_INTEGER,                10000,                      "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SENSITIVITY_ALL",                      OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SENSITIVITY_OPTIMIZER",                OT_INTEGER,                6,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SENSITIVITY_TYPE",                     OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SIM_BASIS_FACTOR_USE",                 OT_INTEGER,                1,                          "Controls whether a (LU) factorization of the basis is used in a hot-start. Forcing a refactorization sometimes improves the stability of the simplex optimizers,                   but in most cases there is a performance penanlty (see MOSEK manual for more detailed description)."                                                                          );
    addOption( "MSK_IPAR_SIM_DEGEN",                            OT_INTEGER,                1,                          "Controls how aggressively degeneration is handled (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                             );
    addOption( "MSK_IPAR_SIM_DUAL_CRASH",                       OT_INTEGER,                90,                         "Controls whether crashing is performed in the dual simplex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                          );
    addOption( "MSK_IPAR_SIM_DUAL_PHASEONE_METHOD",             OT_INTEGER,                0,                          "An exprimental feature (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_SIM_DUAL_RESTRICT_SELECTION",          OT_INTEGER,                50,                         "Controls how aggressively restricted selection is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_SIM_DUAL_SELECTION",                   OT_INTEGER,                0,                          "Controls the dual simplex strategy (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_SIM_EXPLOIT_DUPVEC",                   OT_INTEGER,                0,                          "Controls if the simplex optimizers are allowed to exploit duplicated columns (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_SIM_HOTSTART",                         OT_INTEGER,                1,                          "Controls the type of hot-start that the simplex optimizer perform (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                             );
    addOption( "MSK_IPAR_SIM_HOTSTART_LU",                      OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SIM_INTEGER",                          OT_INTEGER,                0,                          "An exprimental feature (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_SIM_MAX_ITERATIONS",                   OT_INTEGER,                10000000,                   "Maximum number of iterations that can be used by a simplex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                          );
    addOption( "MSK_IPAR_SIM_MAX_NUM_SETBACKS",                 OT_INTEGER,                250,                        "Controls how many set-backs that are allowed within a simplex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                       );
    addOption( "MSK_IPAR_SIM_NON_SINGULAR",                     OT_INTEGER,                1,                          "Controls if the simplex optimizer ensures a non-singular basis,                   if possible (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                 );
    addOption( "MSK_IPAR_SIM_PRIMAL_CRASH",                     OT_INTEGER,                90,                         "Controls the simplex crash (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                    );
    addOption( "MSK_IPAR_SIM_PRIMAL_PHASEONE_METHOD",           OT_INTEGER,                0,                          "An exprimental feature (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_SIM_PRIMAL_RESTRICT_SELECTION",        OT_INTEGER,                50,                         "Controls how aggressively restricted selection is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                        );
    addOption( "MSK_IPAR_SIM_PRIMAL_SELECTION",                 OT_INTEGER,                0,                          "Controls the primal simplex strategy (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                          );
    addOption( "MSK_IPAR_SIM_REFACTOR_FREQ",                    OT_INTEGER,                0,                          "Controls the basis refactoring frequency (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                      );
    addOption( "MSK_IPAR_SIM_REFORMULATION",                    OT_INTEGER,                0,                          "Controls if the simplex optimizers are allowed to reformulate the problem (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                     );
    addOption( "MSK_IPAR_SIM_SAVE_LU",                          OT_INTEGER,                0,                          "Controls if the LU factorization stored should be replaced with the LU factorization corresponding to the initial basis (see MOSEK manual for more detailed description)."                                                                                                                                                                                       );
    addOption( "MSK_IPAR_SIM_SCALING",                          OT_INTEGER,                0,                          "Controls how much effort is used in scaling the problem before a simplex optimizer is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                    );
    addOption( "MSK_IPAR_SIM_SCALING_METHOD",                   OT_INTEGER,                0,                          "Controls how the problem is scaled before a simplex optimizer is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                         );
    addOption( "MSK_IPAR_SIM_SOLVE_FORM",                       OT_INTEGER,                0,                          "Controls whether the primal or the dual problem is solved by the primal-/dual- simplex optimizer (see MOSEK manual for more detailed description)."                                                                                                                                                                                                              );
    addOption( "MSK_IPAR_SIM_STABILITY_PRIORITY",               OT_INTEGER,                50,                         "Controls how high priority the numerical stability should be given (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                            );
    addOption( "MSK_IPAR_SIM_SWITCH_OPTIMIZER",                 OT_INTEGER,                0,                          "Controls the simplex behavior (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                 );
    addOption( "MSK_IPAR_SOL_FILTER_KEEP_BASIC",                OT_INTEGER,                0,                          "Controls the license manager client behavior (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                  );
    addOption( "MSK_IPAR_SOL_FILTER_KEEP_RANGED",               OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SOL_READ_NAME_WIDTH",                  OT_INTEGER,                -1,                         "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SOL_READ_WIDTH",                       OT_INTEGER,                1024,                       "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_SOLUTION_CALLBACK",                    OT_INTEGER,                0,                          "Indicates whether solution call-backs will be performed during the optimization (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                               );
    addOption( "MSK_IPAR_TIMING_LEVEL",                         OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WARNING_LEVEL",                        OT_INTEGER,                1,                          "Deprecated and not in use (see MOSEK manual)"                                                                                                                                                                                                                                                                                                                    );
    addOption( "MSK_IPAR_WRITE_BAS_CONSTRAINTS",                OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_BAS_HEAD",                       OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_BAS_VARIABLES",                  OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_DATA_COMPRESSED",                OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_DATA_FORMAT",                    OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_DATA_PARAM",                     OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_FREE_CON",                       OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_GENERIC_NAMES",                  OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_GENERIC_NAMES_IO",               OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_IGNORE_INCOMPATIBLE_CONIC_ITEMS",OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_IGNORE_INCOMPATIBLE_ITEMS",      OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_IGNORE_INCOMPATIBLE_NL_ITEMS",   OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_IGNORE_INCOMPATIBLE_PSD_ITEMS",  OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_INT_CONSTRAINTS",                OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_INT_HEAD",                       OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_INT_VARIABLES",                  OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_LP_LINE_WIDTH",                  OT_INTEGER,                80,                         "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_LP_QUOTED_NAMES",                OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_LP_STRICT_FORMAT",               OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_LP_TERMS_PER_LINE",              OT_INTEGER,                10,                         "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_MPS_INT",                        OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_PRECISION",                      OT_INTEGER,                8,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_SOL_BARVARIABLES",               OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_SOL_CONSTRAINTS",                OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_SOL_HEAD",                       OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_SOL_IGNORE_INVALID_NAMES",       OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_SOL_VARIABLES",                  OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_TASK_INC_SOL",                   OT_INTEGER,                1,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_IPAR_WRITE_XML_MODE",                       OT_INTEGER,                0,                          "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_SPAR_BAS_SOL_FILE_NAME",                    OT_STRING,                 "",                         "Name of the bas solution file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                 );
    addOption( "MSK_SPAR_DATA_FILE_NAME",                       OT_STRING,                 "",                         "Data are read and written to this file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                        );
    addOption( "MSK_SPAR_DEBUG_FILE_NAME",                      OT_STRING,                 "",                         "MOSEK debug file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                              );
    addOption( "MSK_SPAR_FEASREPAIR_NAME_PREFIX",               OT_STRING,                 "MSK-",                     "Feasibility repair name prefix (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                );
    addOption( "MSK_SPAR_FEASREPAIR_NAME_SEPARATOR",            OT_STRING,                 "-",                        "Feasibility repair name separator (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                             );
    addOption( "MSK_SPAR_FEASREPAIR_NAME_WSUMVIOL",             OT_STRING,                 "WSUMVIOL",                 "Feasibility repair name violation name (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                        );
    addOption( "MSK_SPAR_INT_SOL_FILE_NAME",                    OT_STRING,                 "",                         "Name of the int solution file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                 );
    addOption( "MSK_SPAR_ITR_SOL_FILE_NAME",                    OT_STRING,                 "",                         "Name of the itr solution file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                 );
    addOption( "MSK_SPAR_MIO_DEBUG_STRING",                     OT_STRING,                 "",                         "For internal use only (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                         );
    addOption( "MSK_SPAR_PARAM_COMMENT_SIGN",                   OT_STRING,                 "%%",                       "Solution file comment character (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                               );
    addOption( "MSK_SPAR_PARAM_READ_FILE_NAME",                 OT_STRING,                 "",                         "Modifications to the parameter database is read from this file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                );
    addOption( "MSK_SPAR_PARAM_WRITE_FILE_NAME",                OT_STRING,                 "",                         "The parameter database is written to this file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                );
    addOption( "MSK_SPAR_READ_MPS_BOU_NAME",                    OT_STRING,                 "",                         "Name of the BOUNDS vector used. An empty name means that the first BOUNDS vector is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                      );
    addOption( "MSK_SPAR_READ_MPS_OBJ_NAME",                    OT_STRING,                 "",                         "Objective name in the MPS file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                );
    addOption( "MSK_SPAR_READ_MPS_RAN_NAME",                    OT_STRING,                 "",                         "Name of the RANGE vector used. An empty name means that the first RANGE vector is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                        );
    addOption( "MSK_SPAR_READ_MPS_RHS_NAME",                    OT_STRING,                 "",                         "Name of the RHS used. An empty name means that the first RHS vector is used (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                   );
    addOption( "MSK_SPAR_SENSITIVITY_FILE_NAME",                OT_STRING,                 "",                         "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_SPAR_SENSITIVITY_RES_FILE_NAME",            OT_STRING,                 "",                         "No description available in CasADi, see MOSEK manual."                                                                                                                                                                                                                                                                                                           );
    addOption( "MSK_SPAR_SOL_FILTER_XC_LOW",                    OT_STRING,                 "",                         "Solution file filter (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                          );
    addOption( "MSK_SPAR_SOL_FILTER_XC_UPR",                    OT_STRING,                 "",                         "Solution file filter (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                          );
    addOption( "MSK_SPAR_SOL_FILTER_XX_LOW",                    OT_STRING,                 "",                         "Solution file filter (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                          );
    addOption( "MSK_SPAR_SOL_FILTER_XX_UPR",                    OT_STRING,                 "",                         "Solution file filter (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                          );
    addOption( "MSK_SPAR_STAT_FILE_NAME",                       OT_STRING,                 "",                         "Statistics file name (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                                          );
    addOption( "MSK_SPAR_STAT_KEY",                             OT_STRING,                 "",                         "Key used when writing the summary file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                        );
    addOption( "MSK_SPAR_STAT_NAME",                            OT_STRING,                 "",                         "Name used when writing the statistics file (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                    );
    addOption( "MSK_SPAR_WRITE_LP_GEN_VAR_NAME",                OT_STRING,                 "XMSKGEN",                  "Added variable names in the LP files (see MOSEK manual for more detailed description)."                                                                                                                                                                                                                                                                          );

  }

  MosekInterface::~MosekInterface() {
    if (initialized_) {
      MSK_deletetask(&mosek_task_);
      MSK_deleteenv(&mosek_env_);
    }
  }

  const char* MosekInterface::terminationReason(int flag) {

  }

  const char* MosekInterface::solutionType(int flag) {

  }

  void MosekInterface::init() {
    // Initialize the base classes
    SocpSolverInternal::init();
    log("MosekInterface::init", "Enter");

    initialized_ = true;
	  MSKrescodee  r;
	   
	  // Create the MOSEK environment
	  r = MSK_makeenv(&mosek_env_,NULL);
    // Create empty MOSEK task
    if ( r==MSK_RES_OK ) r = MSK_maketask(mosek_env_,n_,m_+N_,&mosek_task_);
    // Link MOSEK task to stream printer
    if ( r==MSK_RES_OK ) r = MSK_linkfunctotaskstream(mosek_task_,MSK_STREAM_LOG,NULL,printstr);
    // Pre-allocate memory for MOSEK
    if ( r==MSK_RES_OK ) r = MSK_putmaxnumvar(mosek_task_,m_+N_+2*nc_+2*n_);
    if ( r==MSK_RES_OK ) r = MSK_putmaxnumcon(mosek_task_,n_);
    if ( r==MSK_RES_OK ) r = MSK_putmaxnumcone(mosek_task_,m_);
    // Append variables and constraints
    if ( r==MSK_RES_OK ) r = MSK_appendcons(mosek_task_,n_);
    if ( r==MSK_RES_OK ) r = MSK_appendvars(mosek_task_,m_+N_);
    // Set that we desire to minimize SOCP
    if ( r==MSK_RES_OK ) r = MSK_putobjsense(mosek_task_, MSK_OBJECTIVE_SENSE_MAXIMIZE);
    // Set known variable bounds
    for (int i=0;i<m_+N_;++i){
      r = MSK_putvarbound(mosek_task_,i,MSK_BK_FR,-MSK_INFINITY,+MSK_INFINITY);
    }

    // Pass all the options to mosek
    const std::vector<string> options = getOptionNames();
    for (std::vector<string>::const_iterator it=options.begin(); it!=options.end(); ++it)
      if (hasSetOption(*it) && ((*it).find("MSK_")!=std::string::npos)) {
        GenericType op = getOption(*it);
        std::stringstream ss;
        ss << op;
        std::string optionAsString = ss.str();
        r = MSK_putparam(mosek_task_,(*it).c_str(), optionAsString.c_str());
      }

    // Set cone constraints (fixed)
    int largest_cone = *std::max_element(ni_.begin(),ni_.end());
    int submem [largest_cone];
    int sum_ni = 0;
    for (int i=0;i<m_;++i) {
      submem [0] = i;
      for(int ii=0;ii<ni_[i];++ii) submem[ii+1] = m_ + sum_ni + ii;
      MSK_appendcone(mosek_task_,MSK_CT_QUAD,0.0,ni_[i]+1,submem);
      sum_ni += ni_[i];
    }

    // Pre-allocate memory for vector indices of relevant bounds
    primal_idx_lba_.reserve(nc_);
    primal_idx_uba_.reserve(nc_);
    primal_idx_lbx_.reserve(n_);
    primal_idx_ubx_.reserve(n_);

    // Start to construct base of dual_c_
    std::vector<DMatrix> dual_c_v;
    dual_c_v.push_back(input(SOCP_SOLVER_F));
    dual_c_v.push_back(input(SOCP_SOLVER_H));
    dual_c_ = vertcat(dual_c_v).data();
    // Reserve maximum size of dual_c_
    int sizeof_c = m_+N_+2*nc_+2*n_;
    dual_c_.reserve(sizeof_c);

    // Start to construct base of dual_A_
    std::vector<DMatrix> dual_A_v;
    DMatrix dual_A_DMatrix;
    dual_A_v.push_back(input(SOCP_SOLVER_E));
    dual_A_v.push_back(input(SOCP_SOLVER_G));
    dual_A_DMatrix = horzcat(dual_A_v);
    dual_A_data_ = dual_A_DMatrix.data();
    dual_A_row_ = dual_A_DMatrix.sparsity().getRow(); 
    dual_A_colind_ = dual_A_DMatrix.sparsity().getColind(); 
    // Reserve memory for maximum size of dual_A_
    int sizeof_A = input(SOCP_SOLVER_E).size()+input(SOCP_SOLVER_G).size()+2*input(SOCP_SOLVER_A).size()+2*n_;
    dual_A_data_.reserve(sizeof_A);
    dual_A_row_.reserve(sizeof_A);
    dual_A_colind_.reserve(m_+N_+2*nc_+2*n_+1);

    // Start to construct base of dual_b_
    dual_b_ = input(SOCP_SOLVER_C).data();

    // Start to construct base of dual_yi_
    for (int i=m_;i<m_+N_;++i) dual_yi_.push_back(i);

    // Start to construct base of dual_ti_
    for (int i=0;i<m_;++i) dual_ti_.push_back(i);
  }

  void MosekInterface::evaluate() {
    if (inputs_check_) checkInputs();
    if (print_problem_) printProblem();

    // TODO: MOSEK often expects a arrat of indices. Since most of the time the
    // array we  provide is monotonically increasing, we might initialize such array
    // as a member of the class. 
    MSKrescodee r;
    
    // MOSEK expects the SOCP in conic form, obtain this form by formulating dual SOCP
    convertToDualSocp();

    // Remove or append variables
    MSKint32t numvar_old;
    r = MSK_getnumvar(mosek_task_,&numvar_old);
    int numvar_new = m_ + N_ + primal_idx_lba_.size() + primal_idx_uba_.size() + primal_idx_lbx_.size() + primal_idx_ubx_.size();
    int num_vars_to_remove = numvar_old - numvar_new;
    if (num_vars_to_remove < 0){
      r = MSK_appendvars(mosek_task_,-num_vars_to_remove);
    } else if (num_vars_to_remove > 0){
      MSKint32t vars_to_remove [num_vars_to_remove];
      for (int i=0;i<num_vars_to_remove;++i) vars_to_remove[i] = numvar_new + num_vars_to_remove - i - 1;
      r = MSK_removevars(mosek_task_,num_vars_to_remove,vars_to_remove);      
    }

    // Add objective function
    int subj [numvar_new];
    double* c_val = &dual_c_[0];
    for (int i=0;i<numvar_new;++i) subj [i] = i;
    r = MSK_putclist(mosek_task_,numvar_new,subj,c_val);
    for (int i=m_+N_;i<numvar_new;++i) {
      r = MSK_putvarbound(mosek_task_,i,MSK_BK_LO,0.0,+MSK_INFINITY);
    }

    // Add equality constraints
    int* ptrb = &dual_A_colind_[0];
    int* ptre = &dual_A_colind_[1];
    int* asub = &dual_A_row_[0];
    double* aval = &dual_A_data_[0];
    r = MSK_putacollist(mosek_task_,numvar_new,subj,ptrb,ptre,asub,aval);
    for (int i=0;i<n_;++i) {
      r = MSK_putconbound(mosek_task_,i,MSK_BK_FX,-dual_b_[i],-dual_b_[i]);
    }

    // Solve SOCP
    MSKrescodee trmcode;
    r = MSK_optimizetrm(mosek_task_,&trmcode);

    MSK_solutionsummary(mosek_task_,MSK_STREAM_MSG);

    // Extract solution
    double primal_objective;
    double dual_objective;
    double* primal_solution = &output(SOCP_SOLVER_X).data()[0];
    double dual_solution [numvar_new];
    // Get solution data from MOSEK
    r = MSK_getdualobj(mosek_task_,MSK_SOL_ITR,&primal_objective);
    r = MSK_getprimalobj(mosek_task_,MSK_SOL_ITR,&dual_objective);
    r = MSK_gety(mosek_task_,MSK_SOL_ITR,primal_solution);
    r = MSK_getxx(mosek_task_,MSK_SOL_ITR,dual_solution);
    output(SOCP_SOLVER_COST).set(primal_objective);
    output(SOCP_SOLVER_DUAL_COST).set(dual_objective);
    // Change sign of primal solution
    std::for_each(output(SOCP_SOLVER_X).data().begin(),output(SOCP_SOLVER_X).data().end(),[](double& in){in=-in;});
    // Interpret dual solution
    std::copy(dual_solution,dual_solution+m_,output(SOCP_SOLVER_LAM_CONE).data().begin());
    // Fill lagrange multipliers on A*x and x
    std::fill(output(SOCP_SOLVER_LAM_A).begin(),output(SOCP_SOLVER_LAM_A).end(),0);
    std::fill(output(SOCP_SOLVER_LAM_X).begin(),output(SOCP_SOLVER_LAM_X).end(),0);
    int idx = m_+N_;
    for (int i : primal_idx_lba_) {
      output(SOCP_SOLVER_LAM_A).data()[i] = std::max(output(SOCP_SOLVER_LAM_A).data()[i], dual_solution[idx]);
      idx += 1;
    }
    for (int i : primal_idx_uba_) {
      output(SOCP_SOLVER_LAM_A).data()[i] = std::max(output(SOCP_SOLVER_LAM_A).data()[i], dual_solution[idx]);
      idx += 1;
    }
    for (int i : primal_idx_lbx_) {
      output(SOCP_SOLVER_LAM_X).data()[i] = std::max(output(SOCP_SOLVER_LAM_X).data()[i], dual_solution[idx]);
      idx += 1;
    }
    for (int i : primal_idx_ubx_) {
      output(SOCP_SOLVER_LAM_X).data()[i] = std::max(output(SOCP_SOLVER_LAM_X).data()[i], dual_solution[idx]);
      idx += 1;
    }

  }

  void MosekInterface::convertToDualSocp() {
    /**

    Convert Second Order Cone Programming (SOCP) problem in standard form to one in a conic form.

    Dual:

    max          c' x
    x
    subject to
    || yi ||_2 <= ti  i = 1..m
    A x + b == 0
    lbx <= x
     
    Dimensions                       | Meaning in terms of primal variables
    ------------------------------------------------------------------------------------------------------------
    with x ( nx x 1)                 | [lag_ti' lag_yi' lag_lba' lag_uba' lag_lbx' lag_ubx']'
    c dense ( nx x 1 )               | [-fi' hi' LBA' -UBA' LBX' -UBX']'
    yi dense ( ni )                  | Lagrange multipliers for equality constraints: yi = Gi' x + hi
    ti dense ( m )                   | Lagrange multipliers for equality constraint: ti = ei' x + fi
    A  sparse ( n x nx )             | [-ei Gi -Alba' Auba' -Ilbx Iubx]
    b  dense ( n x 1 )               | [c]
    lbx dense ( nx x 1 )             | [-inf' 0']'
    nx = m + N + nlba + nuba + nlbx + nubx

    */

    /*****************************************************************
     * Define aliases                                                *
     *****************************************************************/
    DMatrix& primal_C           = input(SOCP_SOLVER_C);
    DMatrix& primal_G           = input(SOCP_SOLVER_G);
    DMatrix& primal_H           = input(SOCP_SOLVER_H);
    DMatrix& primal_E           = input(SOCP_SOLVER_E);
    DMatrix& primal_F           = input(SOCP_SOLVER_F);
    DMatrix& primal_A           = input(SOCP_SOLVER_A);
    DMatrix& primal_LBA         = input(SOCP_SOLVER_LBA);
    DMatrix& primal_UBA         = input(SOCP_SOLVER_UBA);
    DMatrix& primal_LBX         = input(SOCP_SOLVER_LBX);
    DMatrix& primal_UBX         = input(SOCP_SOLVER_UBX);
    const Sparsity& primal_A_sparse   = primal_A.sparsity();
    const Sparsity& primal_G_sparse   = primal_G.sparsity();

    /*****************************************************************
     * Categorize number of optimization variables for dual problem  *
     *****************************************************************/
    
    // Empty list of indices 
    primal_idx_lba_.resize(0);
    primal_idx_uba_.resize(0);
    primal_idx_lbx_.resize(0);
    primal_idx_ubx_.resize(0);

    // Loop over linear equality constraints
    for (int i=0;i<nc_;++i) {
      if (primal_LBA.at(i) != -std::numeric_limits<double>::infinity()){
        primal_idx_lba_.push_back(i);
      }
      if (primal_UBA.at(i) != std::numeric_limits<double>::infinity()){
        primal_idx_uba_.push_back(i);
      }
    }

    // Loop over simple bounds
    for (int i=0;i<n_;++i) {
      if (primal_LBX.at(i) != -std::numeric_limits<double>::infinity()){
        primal_idx_lbx_.push_back(i);
      }
      if (primal_UBX.at(i) != std::numeric_limits<double>::infinity()){
        primal_idx_ubx_.push_back(i);
      }
    }

    /*****************************************************************
     * Set up dual problem                                           *
     *****************************************************************/

    // c-vector: [fi' -hi' -LBA' UBA' -LBX' UBX']'
    dual_c_.resize(m_+N_);
    int start_idx = 0;
    int end_idx = m_;
    std::copy(primal_F.data().begin(),primal_F.data().end(),dual_c_.begin()+start_idx);
    std::for_each(dual_c_.begin()+start_idx,dual_c_.begin()+end_idx,[](double& in){in=-in;});
    start_idx = end_idx;
    end_idx += N_;
    std::copy(primal_H.data().begin(),primal_H.data().end(),dual_c_.begin()+start_idx);
    for (int i : primal_idx_lba_) dual_c_.push_back(primal_LBA.data()[i]);
    for (int i : primal_idx_uba_) dual_c_.push_back(-primal_UBA.data()[i]);
    for (int i : primal_idx_lbx_) dual_c_.push_back(primal_LBX.data()[i]);
    for (int i : primal_idx_ubx_) dual_c_.push_back(-primal_UBX.data()[i]);

    // A-matrix: [-ei Gi -Alba' Auba' -Ilbx Iubx]
    int begin_colind;
    int end_colind;
    dual_A_data_.resize(primal_E.size()+primal_G.size());
    dual_A_row_.resize(primal_E.size()+primal_G.size());
    dual_A_colind_.resize(m_+N_+1);

    // TODO: replace T()-call by casadi_trans()
    DMatrix primal_A_T = primal_A.T();
    const Sparsity& primal_A_T_sparse = primal_A_T.sparsity();
    start_idx = 0;
    end_idx = primal_E.size();
    std::copy(primal_E.data().begin(),primal_E.data().end(),dual_A_data_.begin()+start_idx);
    std::for_each(dual_A_data_.begin()+start_idx,dual_A_data_.begin()+end_idx,[](double& in){in=-in;});
    start_idx = end_idx;
    end_idx += primal_G.size();
    std::copy(primal_G.data().begin(),primal_G.data().end(),dual_A_data_.begin()+start_idx);
    for (int i : primal_idx_lba_) {
      begin_colind = primal_A_T_sparse.colind(i);
      end_colind = primal_A_T_sparse.colind(i+1);
      for (int ii=begin_colind; ii<end_colind;++ii){
        dual_A_data_.push_back(-primal_A_T.data()[ii]);
        dual_A_row_.push_back(primal_A_T_sparse.getRow()[ii]);
      }
      dual_A_colind_.push_back(dual_A_colind_.back()+end_colind-begin_colind);
    }
    for (int i : primal_idx_uba_) {
      begin_colind = primal_A_T_sparse.colind(i);
      end_colind = primal_A_T_sparse.colind(i+1);
      for (int ii=begin_colind; ii<end_colind;++ii){
        dual_A_data_.push_back(primal_A_T.data()[ii]);
        dual_A_row_.push_back(primal_A_T_sparse.getRow()[ii]);
      }
      dual_A_colind_.push_back(dual_A_colind_.back()+end_colind-begin_colind);
    }
    for (int i : primal_idx_lbx_) {
      dual_A_data_.push_back(-1);
      dual_A_row_.push_back(i);
      dual_A_colind_.push_back(dual_A_colind_.back()+1);
    }
    for (int i : primal_idx_ubx_) {
      dual_A_data_.push_back(1);
      dual_A_row_.push_back(i);
      dual_A_colind_.push_back(dual_A_colind_.back()+1);
    }

    // b-vector
    std::copy(primal_C.data().begin(),primal_C.data().end(),dual_b_.begin());

  }

} // namespace casadi
